<!-- Register page form is referenced from w3schools -->
<script>
  // Reference from lab 14 screencast
  window.onload =  function () {
    let params = (new URL(document.location)).searchParams
    if (params.has('registration_error')) {
      console.log("invalid");
      alert('Fix the following errors: \n' + params.get('registration_error'));
      registration_form["fullname"].value=params.get("fullname");
      registration_form["username"].value=params.get("username");
      registration_form["email"].value=params.get("email");
      }
    }    
</script>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <!-- Links stylesheet for page -->
    <link href= "registration_form.css" rel= "stylesheet">
</head>

<body>
    <!-- Registration form, referenced from w3schools, also lab 14 screencast -->
    <form name="registration_form" action="process_register" method="POST">
        <div class="container">
          <h1>Sign up for an account</h1>
          <p>Please fill in this form to create an account.</p>
          <hr>
          <!-- Name of new user, must use upper and lower case, max 30 characters -->
          <label for="fullname"><b>Full Name</b></label>
          <input type="text" placeholder="Enter Name" name="fullname" id="fullname" pattern="[a-zA-Z]+[ ]+[a-zA-Z]+"
            required title="Enter first and last name.">

          <!-- Username of new user, must have min of 4 and max of 10 letters, numbers and letters only -->
          <label for="username"><b>Username</b></label>
          <input type="text" placeholder="Enter Username" name="username" id="username" pattern=".[a-zA-Z0-9]{3,10}$" 
            required title="Username requires minimum of 4 Characters, maximum of 10 Characters. Numbers and letters only.">

          <!-- Email of new user, must be in ooo@ooo.oo or ooo@ooo.ooo -->
          <label for="email"><b>Email</b></label>
          <input type="text" placeholder="Enter Email" name="email" id="email" pattern="[a-z0-9._]+@[a-z0-9]+\.[a-z]{2,}$"
            required title="Please enter a valid email.">
      
          <!-- Password of new user, must be minimum of 6 letters -->
          <label for="password"><b>Password</b></label>
          <input type="password" placeholder="Enter Password" name="password" id="password" pattern=".{6,}"
            required title="Minimum of 6 Characters.">
      
          <!-- Repeat password, same limits -->
          <label for="password_repeat"><b>Repeat Password</b></label>
          <input type="password" placeholder="Repeat Password" name="password_repeat" id="password_repeat" pattern=".{6,}"
            required title="Passwords must be the same.">
          <hr>
          <!-- Submit -->
          <button type="submit" class="registerbtn">Sign up</button>
        </div>
        
        <div class="container signin">
          <!-- If user has an existing account, redirects to login page -->
          <input type="button" class="btn" name="olduser" value="Already have account? Login here." 
            class="btn2" onclick="window.location='./login.html' + document.location.search;">
        </div>
      </form>

      <script>
        // Saves the query string from the product_page for invoice
        registration_form.action += document.location.search; 
    </script>
</body>
</html>